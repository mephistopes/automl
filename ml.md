# 使用 Azure AI 完成自动化机器学习

Azure AI 提供了强大的定制化功能，可以根据业务需求对模型进行微调。通过 Azure Machine Learning 平台，用户可以自定义训练自己的机器学习模型，并通过 Azure AI 平台的基础设施进行部署和扩展。这样，开发者不仅可以使用预构建的模型，还可以根据实际场景进行调整。

## 创建工作区

使用时，首先新建工作区。在开始时会有免费订阅供使用，用户可以随意命名工作区。创建完成后，系统会生成新的工作区，点击后进入如下界面。
![1](images/1.png)
在该工作区中，有默认的策展环境，用户也可以使用本地环境。使用本地环境适合有定制化需求或想要控制训练过程的开发者。如果数据敏感性较高或数据量较小，本地计算资源足够时，可以选择本地环境。而当处理大数据集时，建议使用策展环境。Azure 提供了完整的机器学习环境，预装了许多流行的库和框架，如 Scikit-learn、TensorFlow、PyTorch 等，用户无需手动配置环境，开箱即用。

## 自动化 ML 使用步骤

1. 点击新建自动化 ML 作业
2. 命名完成后点击“下一步”
3. 示例选择分类任务

## 自动化 ML 使用步骤
我们先以分类预测为例子开始

### 数据集导入
在此处一开始没有数据源，用户可以点击新建导入数据集。我们以微软自动化 ML 使用教程中的样本数据集为例，数据用于预测客户是否参加银行营销活动。以下是数据集字段的个人理解：

- **age**: 整数型（int64） - 客户的年龄
- **job**: 字符串（object） - 客户的职业类别
- **marital**: 字符串（object） - 客户的婚姻状态
- **education**: 字符串（object） - 客户的教育水平
- **default**: 字符串（object） - 客户是否有信用违约记录（"yes"/"no"）
- **housing**: 字符串（object） - 客户是否有住房贷款（"yes"/"no"）
- **loan**: 字符串（object） - 客户是否有个人贷款（"yes"/"no"）
- **contact**: 字符串（object） - 与客户联系的通信方式（"cellular"/"telephone"）
- **month**: 字符串（object） - 上次联系的月份
- **day_of_week**: 字符串（object） - 上次联系的星期几
- **duration**: 整数型（int64） - 最近一次联系的持续时间（秒）
- **campaign**: 整数型（int64） - 在本次活动中联系客户的次数
- **pdays**: 整数型（int64） - 距离上次活动联系客户的天数（999 表示之前没有联系过）
- **previous**: 整数型（int64） - 本次活动之前联系客户的次数
- **poutcome**: 字符串（object） - 之前营销活动的结果（"success"、"failure"、"nonexistent"）
- **emp.var.rate**: 浮点型（float64） - 就业变化率
- **cons.price.idx**: 浮点型（float64） - 消费者物价指数
- **cons.conf.idx**: 浮点型（float64） - 消费者信心指数
- **euribor3m**: 浮点型（float64） - 三个月欧元银行间同业拆借利率
- **nr.employed**: 浮点型（float64） - 在职员工数量
- **y**: 字符串（object） - 目标变量，表示客户是否接受了营销活动（"yes"/"no"）

### 导入数据并选择属性
导入数据后，可以选择哪些属性参与训练。例如，已知无关的数据如 `day_of_week` 可以取消选择。

### 任务设置
在任务设置中，可以选择不想用的模型以减少时间，并对任务进行时间和并发限制。选择计算集群作为计算类型，设置完成后即可开始任务。

### 运行过程
任务开始后，我们可以观察模型运行结果，最终在设定时间结束后，自动化 ML 会自动停止并给出最优模型，还能查看详细的指标和图表。

## 模型评估

通过混淆矩阵可以看出，模型在预测不参加活动的客户上较为准确，但对真正参加活动的客户有一定误判，误判率接近 50%。

此外，最佳模型采用的是多分类器投票模型。可以通过数据转换部分查看其投票组成。
![这是一个示例图片](images/1.png)
